<section class="container">
  <h2>{{ isEdit() ? 'Modifier Rule' : 'Nouvelle Rule' }}</h2>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <label>Nom *</label>
    <input formControlName="name" />

    <label>Policy *</label>
    <select formControlName="policy_id">
      <option [ngValue]="null" disabled>-- choisir --</option>
      @for (p of policies(); track p.id) {
        <option [ngValue]="p.id">#{{p.id}} — {{p.name}}</option>
      }
    </select>

    <button type="submit" [disabled]="form.invalid">
      {{ isEdit() ? 'Enregistrer' : 'Créer' }}
    </button>
  </form>
</section>
